---
title: 'Network-SSL,HTTPS,CA'
date: 2023-09-27
description: 'Network-SSL,HTTPS,CA 개념 파악하기'
thumbnail: './thumbnail.png'
category: 'cs'
isHidden: false
---

## SSL (secure socket layer)

네트워크에서 메시지 전송 시 보안을 위해 개발된 **표준 프로토콜**이다. 즉 HTTP만을 위한 프로토콜이 아닌 응용 계층의 여러 프로토콜의 보안을 위해 발명된 프로토콜이다. \*\*\*\*

**TCP(전송계층)을 보호**하는 프로토콜임

- 장점

  - 기밀성(암호화)
  - 데이터 무결성
  - 서버인증

- SSL 없을 시 문제점

  - 결제 카드번호가 유출될 수 있음
  - 데이터 무결성이 제공되지 않아서 거래정보 수정이 될 수 있음
  - 가짜 사이트에 결제를 하게될수있음

- SSL과 TLS

SSL과 TLS는 같은 말이다. 표준화 기구인 IETF가 관리하며 `TLS`로 이름이 바뀌었다.

## 암호화 방식

SSL동작 방식을 이해하기 위해서는 암호화 방식을 이해해야 한다.

### 대칭키

대칭키 방식은 두명의 사용자가 있을때 둘 모두가 같은 암호키를 가지고 대화를 하는 방식이다.

### 공개키

공개키는 대칭키 방식의 단점인 두 사용자가 모두 같은 비밀번호를 알아야한다는 단점을 보완하고 고안된 방법이다. (암호키 유출가능성이 있음)

공개키 방식은 2개의 키를 가지고 암호화를 진행하게 된다. 한키는 공개가 되어있고 나머지 하나의 키는 주인만 알 수 있다.(개인키)

메세지를 전달하고자 하는 대상의 공개키로 내가 전달할 메세지를 암호화한다. 그럼 전달받은 상대방은 자신의 개인키를 이용하여 메세지를 복호화 하면 끝이다.

## SSL 인증서

SSL 인증서는 서버가 정말 그 서버가 맞는지를 확인할 수 있도록 도와주는 수단

### SSL 인증서의 필요성

가짜 사이트 시나리오를 만들어 주문 내역을 가로채서 피해를 줄 수 있다.

그래서 공개키를 이용해 암호화를 하더라도 진짜 사이트인지 증명할 수단이 필요하다.

이때문에 제 3자가 해당 사이트가 진짜인지를 대신 증명해주는것이다.

### SSL이 제공하는 기능

클라이언트가 접속한 서버가 의도한 서버임을 보장한다.

클라이언트와 서버가 통신할때 암호화 할수 있도록 서버의 공개키를 제공한다.

### CA

SSL인증서를 발급하는 기관으로, 신뢰할 수 있는 기관들을 의미한다.

## SSL 통신과정

### SSL인증서가 의도한 서비스임을 보장하는 방법

1. 브라우저는 이미 CA기관리스트를 알고있다.
2. 브라우저를 통해 사용자가 웹 서비스에 접근한다.
3. 웹서비스는 CA기관을 통해 발급받은 SSL인증서(비밀키로 암호화됨)를 사용자에게 전달한다.
4. 브라우저는 SSL인증서가 CA리스트에 포함된지 확인한다.
5. 포함돼있다면 브라우저는 해당 SSL인증서에 대응하는 CA리스트에 존재하는 공개키를 이용해 SSL복호화한다. 성공했다면 이에 대응되는 비밀키로 암호화가 되었다는 의미이므로 SSL인증서에 해당하는 서비스의 응답을 확신할 수 있다. (신뢰할 수 있는 서버라는 의미)

### HTTPS의 SSL 통신 방법

1. 대칭키 주고받기
   - 클라이언트는 특정 방법을 통해 “premaster secret”이라는 키를 생성한다.
   - 이키는 통신시 대칭키 암호화에 사용될 session key를 만들때 사용되므로 중간 공격자에게 노출되어서는 안된다.
   - 이때문에 서버의 공개키(premaster secret)를 암호화 하여 서버에 전달한다.
   - 서버는 클라이언트로 부터 전달받은 premaster secret키를 자신의 비공개 키를 이용하여 복호화한다.
   - 서버,클라이언트는 모두 premaster secret키를 가지고 있따.
   - 서버,클라이언트 모두 premaster secret을 일련의 과정을 거쳐 session key로 만든다.
   - 서버와 클라이언트는 session key를 이용해 대칭키를 암호화하여 데이터를 주고 받는다.

### 비공개 키와 대칭키 암호화 방식을 같이 사용하는 이유

- 공개키를 이용한 통신 방식은 이를 복호화 암호화 하는데 컴퓨팅 파워를 많이 소모해서 비효율적
- 성능상 이점이 있지만 처음키를 주고받을때 누출될 염려가 있다.
